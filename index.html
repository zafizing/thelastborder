<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE LAST BORDER</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; color: #d4af37; overflow: hidden; font-family: monospace; }
        
        /* EKRAN YÃ–NETÄ°MÄ° */
        #intro-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; width: 100vw; position: fixed; z-index: 999; background: #050505; }
        #war-room { display: none; width: 100vw; height: 100vh; position: relative; background: #000; }
        
        #canvas-container { position: absolute; transform-origin: 0 0; }
        canvas { background: #111; border: 1px solid #333; cursor: crosshair; }

        /* UI */
        #ui-overlay { position: fixed; top: 20px; left: 20px; z-index: 1000; background: rgba(0,0,0,0.9); padding: 15px; border: 1px solid #d4af37; }
        .cta-button { padding: 15px 30px; background: #d4af37; color: #000; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        select { background: #000; color: #d4af37; border: 1px solid #d4af37; padding: 5px; width: 100%; }
    </style>
</head>
<body>

    <div id="intro-screen">
        <h1 style="letter-spacing: 10px;">THE LAST BORDER</h1>
        <div id="countdown" style="font-size: 2rem; color: #ff4500; margin: 20px;">SYSTEM READY</div>
        <button class="cta-button" onclick="startWar()">INITIALIZE CONQUEST</button>
    </div>

    <div id="war-room">
        <div id="ui-overlay">
            <h3 style="margin:0 0 10px 0;">COMMAND CENTER</h3>
            <select id="nationSelect">
                <option value="https://flagcdn.com/w160/tr.png">TURKEY ðŸ‡¹ðŸ‡·</option>
                <option value="https://flagcdn.com/w160/us.png">USA ðŸ‡ºðŸ‡¸</option>
                <option value="https://flagcdn.com/w160/ru.png">RUSSIA ðŸ‡·ðŸ‡º</option>
            </select>
            <p style="font-size: 0.7rem; color: #888; margin-top: 10px;">[DRAG] PAN | [SCROLL] ZOOM</p>
            <button onclick="localStorage.clear(); location.reload();" style="color:red; background:none; border:none; cursor:pointer; font-size:0.6rem;">[ RESET SYSTEM ]</button>
        </div>
        <div id="canvas-container">
            <canvas id="war-canvas"></canvas>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('war-canvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('canvas-container');
        const mapImg = new Image();
        
        // HARÄ°TA KAYNAÄžI - Daha gÃ¼venilir bir URL veya direkt canvas Ã§izimi
        mapImg.crossOrigin = "anonymous";
        mapImg.src = 'https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg';

        let scale = 0.5;
        let originX = 0, originY = 0;
        let isDragging = false, startX, startY, dragMoved = false;

        function startWar() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('war-room').style.display = 'block';
            
            canvas.width = 4000;
            canvas.height = 2000;
            
            // Harita resmini canvas'Ä±n arkasÄ±na Ã§iziyoruz
            mapImg.onload = drawMap;
            if (mapImg.complete) drawMap();
            
            updateTransform();
        }

        function drawMap() {
            ctx.drawImage(mapImg, 0, 0, canvas.width, canvas.height);
        }

        function updateTransform() {
            container.style.transform = `translate(${originX}px, ${originY}px) scale(${scale})`;
        }

        // ZOOM & PAN (KONTROLLERÄ° SADELEÅžTÄ°RDÄ°M)
        window.addEventListener('wheel', (e) => {
            if (document.getElementById('war-room').style.display === 'none') return;
            e.preventDefault();
            const zoom = e.deltaY < 0 ? 1.1 : 0.9;
            scale = Math.min(Math.max(0.1, scale * zoom), 10);
            updateTransform();
        }, { passive: false });

        window.addEventListener('mousedown', (e) => {
            isDragging = true; dragMoved = false;
            startX = e.clientX - originX; startY = e.clientY - originY;
        });

        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                dragMoved = true;
                originX = e.clientX - startX; originY = e.clientY - startY;
                updateTransform();
            }
        });

        window.addEventListener('mouseup', (e) => {
            if (!dragMoved && isDragging) {
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX - rect.left) / scale;
                const y = (e.clientY - rect.top) / scale;
                
                const flag = new Image();
                flag.crossOrigin = "anonymous";
                flag.src = document.getElementById('nationSelect').value;
                flag.onload = () => {
                    ctx.drawImage(flag, Math.floor(x/15)*15, Math.floor(y/10)*10, 15, 10);
                };
            }
            isDragging = false;
        });
    </script>
</body>
</html>
