<button id="walletButton" class="cta-button" onclick="connectWallet()">JOIN THE ARMY (CONNECT WALLET)</button>

    <div id="countdown">LOADING...</div>

    <div class="footer">
        DECENTRALIZED CONQUEST PROTOCOL | POWERED BY SOLANA
    </div>

    <script>
        // --- GERİ SAYIM MANTIĞI ---
        const launchDate = new Date("Feb 24, 2026 12:00:00").getTime();
        function updateCountdown() {
            const now = new Date().getTime();
            const distance = launchDate - now;
            if (distance < 0) {
                document.getElementById("countdown").innerHTML = "THE WAR HAS BEGUN";
                return;
            }
            const h = Math.floor(distance / (1000 * 60 * 60));
            const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("countdown").innerHTML = 
                (h < 10 ? "0" + h : h) + ":" + (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- CÜZDAN BAĞLAMA MANTIĞI ---
        async function connectWallet() {
            const button = document.getElementById('walletButton');
            
            // Phantom veya benzeri bir cüzdan var mı kontrol et
            if ('solana' in window) {
                const provider = window.solana;
                if (provider.isPhantom) {
                    try {
                        // Cüzdana bağlanma isteği gönder
                        const response = await window.solana.connect();
                        const pubKey = response.publicKey.toString();
                        
                        // Buton metnini kısaltılmış cüzdan adresi yap (Örn: 4a2...9xZ)
                        button.innerText = pubKey.slice(0, 4) + "..." + pubKey.slice(-4);
                        button.style.backgroundColor = "#4CAF50"; // Başarılıysa yeşil yap
                        console.log("Soldier enlisted: ", pubKey);
                        
                    } catch (err) {
                        console.error("User rejected the request", err);
                        alert("Connection rejected. We need soldiers, not cowards.");
                    }
                }
            } else {
                // Cüzdan yoksa Phantom indirme sayfasına yönlendir veya uyar
                alert("Solana wallet (Phantom) not found! Install it to join the conquest.");
                window.open("https://phantom.app/", "_blank");
            }
        }
    </script>
